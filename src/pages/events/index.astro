---
import PageLayout from "@layouts/PageLayout.astro";
import { EventList, fetchEvents } from "@modules/events";
import { isFutureDate } from "@utils/formatDate";

const events = await fetchEvents();

// Separate upcoming and past events
const upcomingEvents = events.filter((e) => isFutureDate(e.date));
const pastEvents = events.filter((e) => !isFutureDate(e.date));
---

<PageLayout
  title="Formaci칩n Complementaria"
  description="Congresos, talleres, seminarios y capacitaciones que complementan mi formaci칩n en Ingenier칤a Industrial."
>
  <!-- Hero -->
  <section class="container-custom section">
    <div class="max-w-3xl mx-auto text-center">
      <span
        class="inline-block px-3 py-1 text-sm font-medium text-primary bg-primary/10 rounded-full mb-4"
      >
        Formaci칩n
      </span>
      <h1 class="text-4xl sm:text-5xl font-bold text-foreground mb-6">
        Formaci칩n Complementaria
      </h1>
      <p class="text-xl text-muted-foreground">
        Congresos, talleres y seminarios que complementan mi formaci칩n acad칠mica en Ingenier칤a Industrial.
      </p>
    </div>
  </section>

  <!-- Stats -->
  <section class="container-custom pb-12">
    <div class="grid grid-cols-3 gap-4 max-w-2xl mx-auto">
      <div class="p-4 sm:p-6 rounded-2xl bg-card border border-border text-center">
        <p class="text-2xl sm:text-3xl font-bold text-primary">
          {events.length}
        </p>
        <p class="text-sm text-muted-foreground">Eventos</p>
      </div>
      <div class="p-4 sm:p-6 rounded-2xl bg-card border border-border text-center">
        <p class="text-2xl sm:text-3xl font-bold text-accent">
          {upcomingEvents.length}
        </p>
        <p class="text-sm text-muted-foreground">Pr칩ximos</p>
      </div>
      <div class="p-4 sm:p-6 rounded-2xl bg-card border border-border text-center">
        <p class="text-2xl sm:text-3xl font-bold text-success">
          {pastEvents.length}
        </p>
        <p class="text-sm text-muted-foreground">Completados</p>
      </div>
    </div>
  </section>

  <!-- Upcoming Events -->
  {
    upcomingEvents.length > 0 && (
      <section class="bg-gradient-to-br from-primary/5 via-accent/5 to-primary/5 border-y border-border">
        <div class="container-custom section">
          <h2 class="text-2xl font-bold text-foreground text-center mb-8">
            游꿢 Pr칩ximos eventos
          </h2>
          <EventList events={upcomingEvents} showLink={false} />
        </div>
      </section>
    )
  }

  <!-- Past Events -->
  {
    pastEvents.length > 0 && (
      <section class="container-custom section">
        <h2 class="text-2xl font-bold text-foreground text-center mb-8">
          游닄 Eventos pasados
        </h2>
        <EventList events={pastEvents} showLink={false} />
      </section>
    )
  }

  <!-- Empty State -->
  {
    events.length === 0 && (
      <section class="container-custom py-20">
        <div class="text-center">
          <div class="w-20 h-20 mx-auto mb-6 rounded-full bg-primary/10 flex items-center justify-center">
            <svg
              class="w-10 h-10 text-primary"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5"
              />
            </svg>
          </div>
          <h3 class="text-xl font-semibold text-foreground mb-2">
            Pr칩ximamente m치s eventos
          </h3>
          <p class="text-muted-foreground">
            Estoy preparando nuevos eventos. 춰Vuelve pronto!
          </p>
        </div>
      </section>
    )
  }

  <!-- CTA -->
  <section class="container-custom section">
    <div
      class="max-w-3xl mx-auto text-center p-8 sm:p-12 rounded-3xl bg-card border border-border"
    >
      <h2 class="text-2xl sm:text-3xl font-bold text-foreground mb-4">
        쯊e gustar칤a invitarme a dar una charla?
      </h2>
      <p class="text-muted-foreground mb-6">
        Disfruto compartiendo conocimiento sobre desarrollo frontend, dise침o UI
        y buenas pr치cticas.
      </p>
      <a
        href="/contact"
        class="inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-primary text-primary-foreground font-medium hover:bg-primary/90 transition-all duration-200"
      >
        Cont치ctame
        <svg
          class="w-5 h-5"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path>
        </svg>
      </a>
    </div>
  </section>
</PageLayout>
